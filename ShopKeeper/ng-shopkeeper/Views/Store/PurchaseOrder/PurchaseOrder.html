<br />
<fieldset style="border: none; background: whitesmoke" ng-controller="purchaseOrderController" ng-init="initializeController()">

    <div class="row" ng-hide="newEdit===true||details===true">
      
        <div class="row">
            <div class="col-md-9">
                <h4>Purchase Orders</h4>
            </div>
            <div class="3" ng-if="isPurchaser === true">
                <a ng-click="newOrder()" class="btnAdd btn" style="width: 168px; float: right; text-align:right">New Purchase Order</a>
            </div>
        </div>
        <br />
        <table ng-porders>
            <thead>
            <tr style="color: #fff">
                <th style="width: 2%; text-align: left">
                    S/N
                </th>
                <th style="width: 12%; text-align: left">
                    LPO Number
                </th>
                <th style="width: 20%; text-align: left">
                    Supplier
                </th>
                <th style="width: 20%; text-align: left">
                    Generated By
                </th>
                <th style="width: 12%; text-align: left">
                    Total Cost({{store.DefaultCurrencySymbol}})
                </th>
                <th style="width: 12%; text-align: left">
                  Issue  Date
                </th>
                <th style="width: 12%; text-align: left">
                    Date Delivered
                </th>
                <th style="width: 12%; text-align: left">
                    Status
                </th>
                <th style="width: 8%">
                    Action
                </th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    
<div class="row fsEdit" style="width: 100%; border: 3px solid #27ae60;" ng-show="newEdit===true">
    <div class="modal-body">
        <form method="POST">
            <div class=" modal-header">
                <div class="row" style="border-bottom: 1px solid #e0e0e0">
                    <div class="col-md-4">
                        <h4 class="modal-title">{{header}}</h4>
                    </div>
                    <div class="col-md-5">
                        <strong>Derived Total Cost : <span style="color: #008000;">{{store.DefaultCurrencySymbol}}{{purchaseOrder.DerivedTotalCost | currency: " "}}</span></strong>
                    </div>
                    <div class="col-md-3">
                        <input type="button" value="<< Back" ng-click="initialisePurchaseOrder()" class="btn btn-default" style="font-weight: bold; float: right"/>
                    </div>
                </div>
            </div>
            <!--<div class="row">
                <div class="col-md-6 divlesspadding">
                    <br />
                    <div class="row divlesspadding">
                        <div class="col-md-6  divlesspadding">
                            <label>Receipt/Delivery note print options:</label>
                        </div>
                        <div class="col-md-3">
                            <label class="form-control" style="color: #357ebd; cursor: pointer"><input ng-disabled="edit === false" type="radio" ng-value="1" value="1" name="choice" ng-model="setPrintOption" />&nbsp;A4</label>&nbsp;&nbsp;
                        </div>
                        <div class="col-md-3">
                            <label class="form-control" style="color: #ff6c3a; cursor: pointer"><input ng-disabled="edit === false" type="radio" ng-value="2" value="2" name="choice" ng-model="setPrintOption" />&nbsp;Thermal</label>
                        </div>
                    </div>
                </div>
            </div>-->
            <div class="row alert alert-success" role="alert" ng-show="positivefeedback == true">
                <span class="col-md-11">{{success}}</span><span class="col-md-1" style="font-size: 20px; text-align: left; cursor: pointer" title="close" ng-click="positivefeedback = false">x</span>
            </div>
            <div class="row alert alert-danger" role="alert" ng-show="negativefeedback == true">
                <span class="col-md-11">{{error}}</span><span class="col-md-1" style="font-size: 20px; text-align: left; cursor: pointer" title="close" ng-click="negativefeedback = false">x</span>
            </div>
            <div class="row">
                <div class="col-md-4 divlesspadding right-border">
                    <div class="row">
                        <div class="row">
                            <div class="col-md-12">
                                <label class="control-label ">Supplier *</label>
                                <ui-select ng-model="purchaseOrder.SupplierObject" theme="bootstrap" class="fullWdith">
                                    <ui-select-match placeholder="-- Select supplier --">{{$select.selected.CompanyName}}</ui-select-match>
                                    <ui-select-choices repeat="s in suppliers | propsFilter: {CompanyName: $select.search} track by s.SupplierId">
                                        <div ng-bind-html="s.CompanyName | highlight: $select.search"></div>
                                    </ui-select-choices> 
                                </ui-select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <label class="control-label ">Chart of Account(Account Group) *</label>
                                <ui-select ng-model="purchaseOrder.ChartOfAccountObject" theme="bootstrap" class="fullWdith">
                                    <ui-select-match placeholder="-- Select chart of account --">{{$select.selected.AccountGroupName}}</ui-select-match>
                                    <ui-select-choices repeat="c in chartsofAccount | propsFilter: {AccountGroupName: $select.search} track by c.ChartOfAccountId">
                                        <div ng-bind-html="c.AccountGroupName | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <label class="control-label">Expected Delivery Date *</label>
                                <p class="input-group">
                                    <input type="text" class="form-control datepicker" ng-click="open($event)" datepicker-popup="{{format}}" is-open="opened"
                                           min-date="minDate" max-date="maxDate"
                                           datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close" ng-model="purchaseOrder.ExpectedDeliveryDateStr"/>
                                    <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>   <!--min-date="minDate" max-date="'2015-06-22'"-->
                                        </span>
                                </p>
                            </div>
                        </div>
                        <hr style="padding-bottom: 2px; padding-top: 2px; margin-bottom: 0px;"/>
                        <div class="row">
                            <div class="col-md-12">
                                <angucomplete id="productControl"
                                              placeholder="Search Product by Name or SKU"
                                              pause="10"
                                              selectedobject="selectedProduct"
                                              url="{{homeroot}}/Sales/SearchAllItemPriceListByOutlet?criteria="
                                              searchfields="SKU,StoreItemName"
                                              titlefield="StoreItemName"
                                              minlength="1" inputclass="form-control font-size-1-1"
                                              callback="getProductByNameSku" clearselection="true" />
                            </div>
                        </div>

                        <div class="row modal-footer">

                        </div>
                        <div class="row">
                            <div class="col-md-12 divlesspadding">
                                <div class="col-md-8 divlesspadding">
                                    Fields marked with (*) are mandatory.
                                </div>
                                <div class="col-md-4 divlesspadding">
                                    <input type="button" ng-show="purchaseOrder.PurchaseOrderItemObjects !== null && purchaseOrder.PurchaseOrderItemObjects.length > 0" value="Save Order" ng-disabled="processing === true" ng-click="processPurchaseOrder()" class="btn btn-primary" style="font-weight: bold"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8 right-border">
                    <div class="row">
                        <table class="table-responsive table" role="grid" style="float: left">
                            <thead>
                            <tr style="text-align: left; background-color: whitesmoke;">
                                <th style="color: #008000; width: 15%">
                                    Product
                                </th>
                                <th style="color: #008000; width: 12%">
                                    Order Quantity
                                </th>
                                <th style="color: #008000; width: 12%">
                                    Cost Price({{store.DefaultCurrencySymbol}})
                                </th>
                                <th style="color: #008000; width: 13%">
                                    Total({{store.DefaultCurrencySymbol}})
                                </th>
                                <th style="color: #008000; width: 12%">
                                    Status
                                </th>
                                <th style="color: #008000; width: 3%">
                                    Action
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr data-ng-repeat="i in purchaseOrder.PurchaseOrderItemObjects">
                                <td style="width: 15%">
                                    <div class="row">
                                        <div class="col-md-4" style="padding-right: 10px">
                                            <img src="{{i.ImagePath}}" style="width: 100%"/>
                                        </div>
                                        <div class="col-md-8" style="padding: 0px">
                                            <label style="font-weight: normal">{{i.StoreItemName}}</label>
                                        </div>
                                    </div>
                                </td>
                                <td style="width: 12%">
                                    <input type="text" ng-model="i.QuantityOrdered" class="form-control" ui-number-mask="0" ng-change="updateAmount(i)"/>
                                </td>
                                <td style="width: 12%">
                                    <input type="text" ng-model="i.CostPrice" class="form-control" ui-number-mask="0" ng-change="updateAmount(i)"/>
                                </td>
                                <td style="width: 13%">
                                    <label class="control-label " style="font-weight: normal">{{i.TotalCost | currency: " "}}</label>
                                </td>
                                <td style="width: 12%">
                                    <label class="control-label " style="font-weight: normal">{{i.DeliveryStatus}}</label>
                                </td>
                                <td style="width: 3%">
                                    <a ng-cloak title="Delete" ng-if="i.StatusCode < 2" style="cursor: pointer" ng-click="removeOrderItem(i.TempId)"><img src="/Content/images/delete.png"/></a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <br/>
            <div class="row modal-footer">
            </div>
        </form>
    </div>
</div>

    <div class="row fsEdit" style="width: 100%; border: 3px solid #27ae60;" ng-show="details===true && (isPurchaser === true || isAdmin === true)">
        <br />
        <div class="row" style="border-bottom: 1px solid #e0e0e0">
            <div class="col-md-4">
                <h4>Purchase order Details</h4>
            </div>
            <div class="col-md-4">
                <br/>
                <input type="button" value="Print" ng-click="printLpo()" class="btn btn-primary" style="float: right;"/>
            </div>
            <div class="col-md-4">
                <br/>
                <input type="button" value="<< Back" ng-click="initialisePurchaseOrder()" class="btn btn-default" style="font-weight: bold; float: right"/>
            </div>
        </div>

        <div class="modal-body">
            <form method="POST">
                <div class="row">
                    <div class="row">
                        <div class="row">
                            <div class="col-md-12">
                                Supplier : <strong> {{purchaseOrder.SupplierObject.CompanyName}} </strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                Date Generated : <strong>{{purchaseOrder.DateTimePlacedStr}}</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                Expected Delivery Date : <strong>{{purchaseOrder.ExpectedDeliveryDateStr}}</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                Delivery Status : <strong>{{purchaseOrder.DeliveryStatus}}</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                Derived Total Cost : <strong><span style="color: #008000;">{{store.DefaultCurrencySymbol}}{{purchaseOrder.DerivedTotalCost | currency: " "}}</span></strong>
                            </div>
                        </div>
                    </div>
                    <br /><br />
                    <div class="row">
                        <table class="table-responsive table" role="grid" style="float: left">
                            <thead>
                                <tr style="text-align: left; background-color: whitesmoke;">
                                    <th style="color: #008000; width: 15%">
                                        Product
                                    </th>
                                    <th style="color: #008000; width: 12%">
                                        Order Qty
                                    </th>
                                    <th style="color: #008000; width: 12%">
                                        Cost Price({{store.DefaultCurrencySymbol}})
                                    </th>
                                    <th style="color: #008000; width: 13%">
                                        Total({{store.DefaultCurrencySymbol}})
                                    </th>
                                    <th style="color: #008000; width: 12%">
                                        Status
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-ng-repeat="i in purchaseOrder.PurchaseOrderItemObjects">
                                    <td style="width: 15%">
                                        <div class="row">
                                            <div class="col-md-4" style="padding-right: 10px">
                                                <img src="{{i.ImagePath}}" style="width: 100%" />
                                            </div>
                                            <div class="col-md-8" style="padding: 0px">
                                                <label style="font-weight: normal">{{i.StoreItemName}}</label>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="width: 12%">
                                        <label>{{i.QuantityOrdered | number:0}}{{i.UoMCode}}</label>
                                    </td>
                                    <td style="width: 12%">
                                        <label>{{i.CostPrice | currency: " "}}</label>
                                    </td>
                                    <td style="width: 13%">
                                        <label class="control-label " style="font-weight: normal">{{i.TotalCost | currency: " "}}</label>
                                    </td>
                                    <td style="width: 12%">
                                        <label class="control-label " style="font-weight: normal">{{i.DeliveryStatus}}</label>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <br />
                <div class="row modal-footer">
                </div>
            </form>
        </div>
    </div>
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    <div id="receipt" style="visibility: visible" class="col-md-12">

    </div>

    <br /><br /><br />
<br/>
</fieldset>
<br/>