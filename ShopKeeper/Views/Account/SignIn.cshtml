@model ShopKeeper.Models.LoginViewModel

@{
    ViewBag.Title = "SignIn";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--[if gte IE 9]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
    <!--[if IE 8]><meta http-equiv="X-UA-Compatible" content="IE=8"><![endif]-->
    <title>@ViewBag.StoreName</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="/Content/feedbackmessage.css" rel="stylesheet" />
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/icons/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/icons/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/icons/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/images/icons/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="/assets/images/icons/favicon.png">

    <!-- JS Core -->
    <script type="text/javascript" src="/assets/js-core.js"></script>

    <script type="text/javascript">
        $(window).load(function ()
        {
            setTimeout(function ()
            {
                $('#loading').fadeOut(400, "linear");
            }, 300);
        });
    </script>
    <style>
        #loading 
        {
            position: fixed;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            display: block;
            background: #fff;
            z-index: 10000;
        }

            #loading img {
                position: absolute;
                top: 50%;
                left: 50%;
                margin: -23px 0 0 -23px;
            }
    </style>


    <link rel="stylesheet" type="text/css" href="/assets/all-demo.css">


</head>
<body>
    <div id="loading"><img src="/assets/images/spinner/loader-dark.gif" alt="Loading..."></div>

    <style type="text/css">
        body {
            overflow: hidden;
            height: 100% !important;
        }
    </style>


<div class="center-vertical">
    <div class="center-content content-box content-box-wrapper  center-margin">
      
        <div class="col-md-2"></div>

        <div class="col-md-8">
            <div class="col-md-12" >
                <div class="col-md-4"></div>
                <div class="col-md-7">
                    <h4 style="margin-bottom: 15px">Login to your Account</h4>
                </div>
            </div>
           
            <div class="row">
                <form id="login-validation">
                    <div class="col-md-4">
                        <div class="col-md-12">
                            <img src="@ViewBag.StoreImage" style="width: 100%;"/>
                        </div>
                        <div class="col-md-12">
                            <div><h3 class="text-center pad25B font-gray font-size-23" style="float: left"><b>@ViewBag.StoreName</b></h3></div>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div id="login-form" class="content-box">
                            <div class="content-box-wrapper pad20A">
                                <div class="form-group">
                                    <label for="email">Email address:</label>
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-addon addon-inside bg-white font-primary">
                                            <i class="glyph-icon icon-envelope-o"></i>
                                        </span>
                                        <input type="email" class="form-control" id="email" placeholder="Enter email">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="password">Password:</label>
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-addon addon-inside bg-white font-primary">
                                            <i class="glyph-icon icon-unlock-alt"></i>
                                        </span>
                                        <input type="password" class="form-control" id="password" placeholder="Password">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="checkbox-primary col-md-6" style="height: 20px;">
                                        <label>
                                            <input type="checkbox" id="rem" class="custom-checkbox">
                                            Remember me
                                        </label>
                                    </div>
                                    <div class="text-right col-md-6">
                                        <a href="#" class="switch-button" switch-target="#login-forgot" switch-parent="#login-form" title="Recover password">Forgot your password?</a>
                                    </div>
                                </div>
                            </div>
                            <div class="button-pane">
                                <input type="button" id="signin" class="btn btn-block btn-primary" value="Login" />
                            </div>
                        </div>
                        <div id="login-forgot" class="content-box hide">
                            <div class="content-box-wrapper pad20A">
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Email address:</label>
                                    <div class="input-group">
                                        <span class="input-group-addon addon-inside bg-gray">
                                            <i class="glyph-icon icon-envelope-o"></i>
                                        </span>
                                        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
                                    </div>
                                </div>
                            </div>
                            <div class="button-pane text-center">
                                <button class="btn btn-md btn-primary">Recover Password</button>
                                <a href="#" class="btn btn-md btn-link switch-button" switch-target="#login-form" switch-parent="#login-forgot" title="Cancel">Cancel</a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-2"></div>
    </div>
</div>

<script type="text/javascript" src="/assets/all-demo.js"></script>
    <!--[if !(IE 8)]><!-->
    <script type="text/javascript" src="/assets/widgets/skycons/skycons.js"></script>
    <script type="text/javascript" src="/assets/widgets/charts/piegage/piegage.js"></script>
    <script type="text/javascript" src="/assets/widgets/charts/piegage/piegage-demo.js"></script>
    <script type="text/javascript" src="/assets/widgets/charts/sparklines/sparklines.js"></script>
    <script type="text/javascript" src="/assets/widgets/charts/sparklines/sparklines-demo.js"></script>
    <![endif]-->
    <!--[if lt IE 9]>
      <script src="/assets/js-core/html5shiv.js"></script>
    <![endif]-->

    <div class="angular-center-container">
        <div class="angular-centered">
            <img src="/content/images/spinningred.gif" id="busy" style="display: none;">
        </div>
    </div>
</body>
</html>

<script type="text/javascript">

    $('#signin').on('click', function (e)
    {
          e.preventDefault;
            var userName = $('#email').val().trim();
            var password = $('#password').val();
            var rememberMe = $('#rem').is('checked');
                

            if (userName == null || userName.length < 1)
            {
                alert('Please provide your Email');
                return;
            }

            if (password == null || password.length < 1) {
                alert('Please provide your Password');
                return;
            }

            var model = { 'UserName': userName, 'Password': password, 'RememberMe': rememberMe };

            var sdx = JSON.stringify({ model: model });

            var url = '/Account/NgSignIn';
            $('#busy').fadeIn();
            $.ajax({
                async: false,
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                data: sdx,
                type: "POST",
                url: url,
                success: function (r)
                {
                    $('#busy').fadeIn();
                    if (r.Code < 1)
                    {
                        alert(r.UserName);
                        return;
                    } else {
                        var redir = '/ngy.html#Store/Dashboard/Dashboard';
                        window.location = redir.replace("/Account", "");
                    }
                }
            });
        
    });

</script>